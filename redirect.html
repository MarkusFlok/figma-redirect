<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting to Figma...</title>
    <script>
        // Get the figmaLink query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const figmaLink = urlParams.get('figmaLink');

        if (figmaLink) {
            // Decode the figmaLink
            const decodedLink = decodeURIComponent(figmaLink);

            // If the link starts with figma://, attempt to open the app
            if (decodedLink.startsWith('figma://')) {
                // Open the Figma link in a new tab
                const newTab = window.open(decodedLink, '_blank');
                if (newTab) {
                    // After opening the new tab, attempt to close the current window after 3 seconds
                    setTimeout(function() {
                        window.close(); // This will now work if the page was opened with window.open()
                    }, 3000); // Delay to ensure the redirection happens before closing the window
                }
            } else {
                // Fallback for the web version of the Figma design
                window.location.href = decodedLink.replace('figma://', 'https://www.figma.com/');
            }
        } else {
            document.body.innerHTML = "<p>Invalid Figma link. Please check the URL.</p>";
        }
    </script>
</head>
<body>
    <p>Redirecting to Figma...</p>
</body>
</html>
